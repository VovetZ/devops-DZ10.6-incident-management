# devops-DZ10.6-incident-management
# Домашнее задание к занятию "17.Инцидент-менеджмент"

## Задание 1

Составьте постмортем, на основе реального сбоя системы Github в 2018 году.

Информация о сбое доступна [в виде краткой выжимки на русском языке](https://habr.com/ru/post/427301/) , а
также [развёрнуто на английском языке](https://github.blog/2018-10-30-oct21-post-incident-analysis/).


---

### Как оформить ДЗ?

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

---


## Решение

### Краткое описание

21 октября в 22:52 UTC в результате плановых работ по замене вышедшего из строя оптического оборудования
была потеряна связь между сетевым хабом на восточном побережье США и основным дата-центром
на восточном побережье США. Соединение было восстановлено в течение 43 секунд, но в результате последствий отображалась устаревшая
информация на сайте Github и ее обновление было неовзможно. Работоспособность восстановили через 24 часа 11 минут,
данные пользователей сохранены.

### Предшествующие события

Плановые работы по замене вышедшего из строя оптического оборудования 100G

### Причина инцидента

Потеря связи между сетевым хабом и основным дата-центром на восточном побережье США, из-за проведения плановых работ.

### Воздействие

Сбой базы данных, в результате чего на сайте появилась несогласованная информация

### Обнаружение

21 октября в 22:54 UTC внутренние системы мониторинга начали выдавать предупреждения о многочисленных
сбоях в системах Github.
К 23:02 UTC инженеры группы быстрого реагирования выяснили, что топологии многочисленных кластеров БД
находились в непредвиденном состоянии.

## Реакция

Инженеры группы быстрого реагирования, координатор инцидентов и группа реагирования на инциденты работали над устранением
инцидента. Были вызваны дополнительные инженеры из группы разработки базы данных GitHub. Пользователи были уведомлены
через Twitter и блог GitHub.

### Восстановление

Базы данных восстановлены из резервных копий, реплики на обеих площадках синхронизированы, оригинальная
топология была возвращена, возобновлена обработка заданий в очереди.

### Timeline

- 21 октября в 22:52 UTC Регламентные работы по замене вышедшего из строя оптического оборудования 100G
- 21 октября, 22:52 UTC, согласно консенсусу Raft сети Orchestrator, начато аварийное переключение кластеров для направления
операции записи в центр обработки данных на западном побережье США.
- 21 октября в 22:54 UTC внутренние системы мониторинга начали выдавать предупреждения о многочисленных
системных сбоях.
- 21 октября в 23:02 UTC инженеры группы быстрого реагирования установили, что топологии многочисленных кластеров баз данных
находятся в непредвиденном состоянии.
- 21 октября, 23:07 UTC, группа реагирования вручную заблокировала внутренний инструмент развертывания.
- 21 октября в 23:09 UTC команда респондентов поместила сайт в желтый статус
- 21 октября, 23:11, присоединился координатор инцидента и через две минуты сменил статус на красный.
- 21 октября в 23:13 UTC стало известно, что проблема коснулась нескольких кластеров баз данных. Дополнительно
были вызваны инженеры из группы разработки базы данных GitHub.
- 21 октября, 23:19 UTC, Задачи, записывающие метаданные о таких вещах, как push-уведомления,
были приостановлены, выполнение веб-перехватчика и сборка GitHub Pages были приостановлены.
- 22 октября в 00:05 UTC инженеры приступили к разработке плана по устранению несоответствий данных и внедрению процедур аварийного переключения. Обновлен статус для пользователей о контролируемом переходе на другую ноду кластера
- 22 октября, 00:41 UTC, процесс резервного копирования был инициирован для всех затронутых кластеров MySQL.
- 22 октября в 06:51 UTC несколько кластеров завершили восстановление из резервных копий в центр обработки данных на востоке США и начали
тиражирование новых данных с датацентра с западного побережья.
- 22 октября в 07:46 UTC GitHub опубликовал сообщение в блоге, чтобы предоставить дополнительную информацию.
- 22 октября, 11:12 UTC Все первичные базы снова установлены на восточном побережье США.
- 22 октября в 13:15 UTC в публичном облаке восточного побережья США стали доступны дополнительные реплики чтения MySQL.
- 22 октября в 16:24 UTC произведена синхронизация реплик, произведен аварийный переход на исходную топологию.
- 22 октября в 16:45 UTC снова включена обработка очереди из более чем пяти миллионов событий-ловушек и 80 тысяч сборок страниц.
- 22 октября, 23:03 UTC, Все ожидающие сборки вебхуков и страниц обработаны, целостность и корректность работы
всех систем подтверждено. Статус сайта был обновлен до зеленого.

### Последующие действия
 
* Изменение конфигурации Оркестратора.
* Ускорение перехода на новый механизм отчетности о статусе услуги, так как статусы "зеленый", "желтый", "красный" не
могут дать пользователям полное представление о доступности той или иной услуги.
* Ускорение перехода на схему обработки трафика GitHub "active/active/active". Цель данной работы состоит в том, чтобы позволить полностью отказаться от
одного дата-центра без ущерба для пользователя
